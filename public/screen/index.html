<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Useless Sound Box</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107262369-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());

      gtag('config', 'UA-107262369-1');
    </script>
  </head>
  <body>
    <h1 class="text-center">Useless Sound Box</h1>

    <div id="no-animation" class="text-center" style="margin-top: 50px;">
      <h2>Nothing is playing...</h2>
      <img src="../images/nothing.png" style="max-width: 200px;" />
    </div>

    <audio id="philippe" onended="onEnded('philippe')">
      <source src="../sounds/philippe.mp3" type="audio/mpeg" />
    </audio>
    <div id="philippe-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Philippe ! Enculé !!!</h2>
      <img src="../images/philippe.jpg" style="max-width: 800px;" />
    </div>

    <audio id="motus" onended="onEnded('motus')">
      <source src="../sounds/motus.mp3" type="audio/mpeg" />
    </audio>
    <div id="motus-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Oh ... Oh oh oh oh :-(</h2>
      <img src="../images/motus.jpg" style="max-width: 800px;" />
    </div>

    <audio id="jeanne" onended="onEnded('jeanne')">
      <source src="../sounds/jeanne.mp3" type="audio/mpeg" />
    </audio>
    <div id="jeanne-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Jeanne ! Au secours !!!</h2>
      <img src="../images/jeanne.jpg" style="max-width: 800px;" />
    </div>

    <audio id="rouquin" onended="onEnded('rouquin')">
      <source src="../sounds/rouquin.mp3" type="audio/mpeg" />
    </audio>
    <div id="rouquin-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>J'vais t'faire courir moi le rouquin !</h2>
      <img src="../images/rouquin.jpg" style="max-width: 800px;" />
    </div>

    <audio id="ah" onended="onEnded('ah')">
      <source src="../sounds/ah.mp3" type="audio/mpeg" />
    </audio>
    <div id="ah-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Ah !</h2>
      <img src="../images/ah.jpg" style="max-width: 800px;" />
    </div>

    <audio id="baptiste" onended="onEnded('baptiste')">
      <source src="../sounds/baptiste.mp3" type="audio/mpeg" />
    </audio>
    <div id="baptiste-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Mais si j'suis très net...</h2>
      <img src="../images/baptiste.jpg" style="max-width: 800px;" />
    </div>

    <audio id="cafard" onended="onEnded('cafard')">
      <source src="../sounds/cafard.mp3" type="audio/mpeg" />
    </audio>
    <div id="cafard-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Ali Ben c'est un cafard !</h2>
      <img src="../images/cafard.jpg" style="max-width: 800px;" />
    </div>

    <audio id="souffrir" onended="onEnded('souffrir')">
      <source src="../sounds/souffrir.mp3" type="audio/mpeg" />
    </audio>
    <div id="souffrir-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>J'suis pas venue ici pour souffir ok !</h2>
      <img src="../images/souffrir.jpg" style="max-width: 800px;" />
    </div>

    <audio id="universal" onended="onEnded('universal')">
      <source src="../sounds/universal.mp3" type="audio/mpeg" />
    </audio>
    <div id="universal-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Générique !</h2>
      <img src="../images/universal.jpg" style="max-width: 800px;" />
    </div>

    <audio id="centuryfox" onended="onEnded('centuryfox')">
      <source src="../sounds/centuryfox.mp3" type="audio/mpeg" />
    </audio>
    <div id="centuryfox-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>20th Century Fox !</h2>
      <img src="../images/centuryfox.jpg" style="max-width: 800px;" />
    </div>

    <audio id="jonathan" onended="onEnded('jonathan')">
      <source src="../sounds/jonathan.mp3" type="audio/mpeg" />
    </audio>
    <div id="jonathan-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Qu'est qui est jaune et qui attend ?</h2>
      <img src="../images/jonathan.jpg" style="max-width: 800px;" />
    </div>

    <audio id="sancowl" onended="onEnded('sancowl')">
      <source src="../sounds/sancowl.mp3" type="audio/mpeg" />
    </audio>
    <div id="sancowl-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Jean-Michel Sancowl</h2>
      <img src="../images/sancowl.jpg" style="max-width: 800px;" />
    </div>

    <audio id="allezviens" onended="onEnded('allezviens')">
      <source src="../sounds/allezviens.mp3" type="audio/mpeg" />
    </audio>
    <div id="allezviens-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Allez... Viens !</h2>
      <img src="../images/allezviens.jpg" style="max-width: 800px;" />
    </div>

    <audio id="countdown" onended="onEnded('countdown')">
      <source src="../sounds/countdown.mp3" type="audio/mpeg" />
    </audio>
    <div id="countdown-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>The Final Countdown</h2>
      <img src="../images/countdown.jpg" style="max-width: 800px;" />
    </div>

    <audio id="venere" onended="onEnded('venere')">
      <source src="../sounds/venere.mp3" type="audio/mpeg" />
    </audio>
    <div id="venere-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Ça m'vénère</h2>
      <img src="../images/venere.jpg" style="max-width: 800px;" />
    </div>

    <audio id="vedette" onended="onEnded('vedette')">
      <source src="../sounds/vedette.mp3" type="audio/mpeg" />
    </audio>
    <div id="vedette-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Comme un aigle !</h2>
      <img src="../images/vedette.jpg" style="max-width: 800px;" />
    </div>

    <audio id="terrainmine" onended="onEnded('terrainmine')">
      <source src="../sounds/terrainmine.mp3" type="audio/mpeg" />
    </audio>
    <div id="terrainmine-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Terrain Miné</h2>
      <img src="../images/terrainmine.jpg" style="max-width: 800px;" />
    </div>

    <audio id="bonbons" onended="onEnded('bonbons')">
      <source src="../sounds/bonbons.mp3" type="audio/mpeg" />
    </audio>
    <div id="bonbons-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Bonbons</h2>
      <img src="../images/bonbons.jpg" style="max-width: 800px;" />
    </div>

    <audio id="partouzeurs" onended="onEnded('partouzeurs')">
      <source src="../sounds/partouzeurs.mp3" type="audio/mpeg" />
    </audio>
    <div id="partouzeurs-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Partouzeurs</h2>
      <img src="../images/partouzeurs.jpg" style="max-width: 800px;" />
    </div>

    <audio id="gladiateurs" onended="onEnded('gladiateurs')">
      <source src="../sounds/gladiateurs.mp3" type="audio/mpeg" />
    </audio>
    <div id="gladiateurs-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Gladiateurs</h2>
      <img src="../images/gladiateurs.jpg" style="max-width: 800px;" />
    </div>

    <audio id="monsieurtoutnu" onended="onEnded('monsieurtoutnu')">
      <source src="../sounds/monsieurtoutnu.mp3" type="audio/mpeg" />
    </audio>
    <div id="monsieurtoutnu-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Monsieur tout nu</h2>
      <img src="../images/monsieurtoutnu.jpg" style="max-width: 800px;" />
    </div>

    <audio id="plataoplomo" onended="onEnded('plataoplomo')">
      <source src="../sounds/plataoplomo.mp3" type="audio/mpeg" />
    </audio>
    <div id="plataoplomo-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Plata o Plomo</h2>
      <img src="../images/plataoplomo.jpg" style="max-width: 800px;" />
    </div>

    <audio id="odile" onended="onEnded('odile')">
      <source src="../sounds/odile.mp3" type="audio/mpeg" />
    </audio>
    <div id="odile-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Odile</h2>
      <img src="../images/odile.jpg" style="max-width: 800px;" />
    </div>

    <audio id="shallnotpass" onended="onEnded('shallnotpass')">
      <source src="../sounds/shallnotpass.mp3" type="audio/mpeg" />
    </audio>
    <div id="shallnotpass-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>Shall not pass</h2>
      <img src="../images/shallnotpass.jpg" style="max-width: 800px;" />
    </div>

    <audio id="bitch" onended="onEnded('bitch')">
      <source src="../sounds/bitch.mp3" type="audio/mpeg" />
    </audio>
    <div id="bitch-animation" class="text-center" style="margin-top: 50px; display: none;">
      <h2>BITCH</h2>
      <img src="../images/bitch.png" style="max-width: 800px;" />
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      var playing = false

      var onEnded = function(id) {
        console.log('Sound ended: ' + id)
        document.getElementById('no-animation').style.display = 'block';
        document.getElementById(id + '-animation').style.display = 'none';
        playing = false
      }

      fetch('/api/config')
      .then(function(response) {
        return response.json()
      })
      .then(function(json) {
        var socketioUri = json.socketioUri
        console.log('Socket.io URI is: ' + socketioUri)
        var socket = io.connect(socketioUri);
        socket.on('play_sound', function (data) {
          var soundId = data.id
          var audio = document.getElementById(soundId);
          if (audio) {
            if (playing) {
              console.log('Another sound is playing... Cannot play: ' + soundId)
            } else {
              console.log('Playing sound: ' + soundId)
              playing = true
              document.getElementById('no-animation').style.display = 'none';
              document.getElementById(soundId + '-animation').style.display = 'block';
              audio.play()
            }
          }
        })
      })
      .catch(function(error) {
        console.error('Cannot get configuration!')
        console.error(error)
      })

    </script>
  </body>
</html>
